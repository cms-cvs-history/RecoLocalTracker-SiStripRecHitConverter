process Clusterizer = {

    untracked PSet maxEvents = {untracked int32 input = -1}
    untracked PSet configurationMetadata = {
    }

       service = MessageLogger {
                untracked vstring destinations = { "DigiToRecHitRead_err.txt", "DigiToRecHitRead_log.txt","cout","cerr" }
                untracked vstring statistics   = { "statistics.txt"}
                untracked PSet statistics.txt  = { untracked string threshold  = "WARNING"   }
                untracked PSet DigiToRecHit_err.txt = { untracked string threshold = "ERROR"}
		untracked PSet cerr     = { untracked string threshold = "WARNING" }
        }

    source = PoolSource {
      untracked vstring fileNames = {'rfio:/castor/cern.ch/cms/store/RelVal/2007/5/11/RelVal-RelVal_Marcelo_140QCD_pt15_20-1178901791/0000/9A70B29B-2800-DC11-8079-000E0C3F095D.root'}
    }


   include 'Configuration/ReleaseValidation/data/Services.cfi'

    include 'Configuration/StandardSequences/data/Reconstruction.cff'
	replace ctfWithMaterialTracks.TrajectoryInEvent = true
    include 'Configuration/StandardSequences/data/Simulation.cff'
    include 'Configuration/StandardSequences/data/MixingNoPileUp.cff'
    include 'Configuration/StandardSequences/data/FakeConditions.cff'
	


 include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
       module CPEtest =  CPE{
                untracked int32 VerbosityLevel = 1
                string RecHitProducer = "siStripMatchedRecHits"
		string StripCPE ="StripCPEfromTrackAngle"
		InputTag TkRecHits =ctfWithMaterialTracks
                bool associateStrip = true
                bool associatePixel = false
                bool associateRecoTracks = false
                vstring ROUList = {
#For running only strip or pixel comment out the appropriate strings
#TIB
                 "TrackerHitsTIBLowTof","TrackerHitsTIBHighTof",
#TID
                 "TrackerHitsTIDLowTof","TrackerHitsTIDHighTof",
#TOB
                 "TrackerHitsTOBLowTof","TrackerHitsTOBHighTof",
#TEC
                  "TrackerHitsTECLowTof","TrackerHitsTECHighTof"}
    }
    include 'Configuration/EventContent/data/EventContent.cff'

    module FEVT = PoolOutputModule {
      untracked string fileName = 'QCD.root'
      using FEVTSIMEventContent
      #using RECOSIMEventContent
      #using AODSIMEventContent
      untracked PSet dataset = {
        untracked string dataTier = 'GEN-SIM-DIGI-RECO'
      }
    }
#
#  drop all the INPUT stuff, BUT simulation
#

    replace FEVT.outputCommands += 'drop *_*_*_Rec'
    replace FEVT.outputCommands += SimG4CoreFEVT.outputCommands
    replace FEVT.outputCommands += SimTrackerFEVT.outputCommands
    replace FEVT.outputCommands += SimMuonFEVT.outputCommands
    replace FEVT.outputCommands += SimCalorimetryFEVT.outputCommands
    replace FEVT.outputCommands += RecoGenJetsFEVT.outputCommands
    module evtInfo = AsciiOutputModule {}

    # Track Validator
    include "Validation/RecoTrack/data/MultiTrackValidator.cff"
    #replace multiTrackValidator.associators = {"TrackAssociatorByChi2"}
    #replace multiTrackValidator.label = {"ctfWithMaterialTracks"}
    #replace multiTrackValidator.label_tp = trackingtruth:TrackTruth
    #replace multiTrackValidator.out = "file.root"

    # Tracking Truth
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    #include "SimGeneral/TrackingAnalysis/data/trackingtruth.cfi"
    #replace trackingtruth.HepMCDataLabels = {"source"}
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"

    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"




    #
    # run digitization before reconstruction

#    path p1 = {pdigi, trackerlocalreco, ckftracks,rstracks,multiTrackValidator}
    path p1 = {pdigi, trackerlocalreco, ckftracks,CPEtest}
#    endpath outpath = {FEVT}

}
