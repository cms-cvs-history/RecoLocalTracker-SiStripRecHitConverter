process Clusterizer = {

    untracked PSet maxEvents = {untracked int32 input = 1000}
    include "FWCore/MessageLogger/data/MessageLogger.cfi"


    source = PoolSource {
      untracked vstring fileNames = {
'/store/relval/2008/6/22/RelVal-RelValQCD_Pt_50_80-1213987236-IDEAL_V2-2nd/0003/2613CED1-E340-DD11-98E7-000423D9880C.root'
}

    }

   include "RecoLocalTracker/SiStripRecHitConverter/test/RelValTTbar.cff"
   include 'Configuration/StandardSequences/data/Services.cff'
    include "Configuration/StandardSequences/data/MagneticField_38T.cff"
    include 'Configuration/StandardSequences/data/Reconstruction.cff'
#	replace ctfWithMaterialTracks.TrajectoryInEvent = true
    include 'Configuration/StandardSequences/data/Simulation.cff'
    include 'Configuration/StandardSequences/data/MixingNoPileUp.cff'
    include 'Configuration/StandardSequences/data/FakeConditions.cff'
	
include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
 replace TrackRefitter.TrajectoryInEvent = true

 include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
       module CPEtest =  CPE{
                untracked int32 VerbosityLevel = 1
                string RecHitProducer = "siStripMatchedRecHits"
		string StripCPE ="StripCPEfromTrackAngle"
		InputTag TkRecHits =TrackRefitter
                bool associateStrip = true
                bool associatePixel = false
                bool associateRecoTracks = false
                vstring ROUList = {
#For running only strip or pixel comment out the appropriate strings
#TIB
                 "g4SimHitsTrackerHitsTIBLowTof","g4SimHitsTrackerHitsTIBHighTof",
#TID
                 "g4SimHitsTrackerHitsTIDLowTof","g4SimHitsTrackerHitsTIDHighTof",
#TOB
                 "g4SimHitsTrackerHitsTOBLowTof","g4SimHitsTrackerHitsTOBHighTof",
#TEC
                  "g4SimHitsTrackerHitsTECLowTof","g4SimHitsTrackerHitsTECHighTof"}
    }
    include 'Configuration/EventContent/data/EventContent.cff'

service = TFileService { 
    string fileName = "resolution_ttbar.root"
  }


    module FEVT = PoolOutputModule {
      untracked string fileName = 'QCD.root'
      using FEVTSIMEventContent
      #using RECOSIMEventContent
      #using AODSIMEventContent
      untracked PSet dataset = {
        untracked string dataTier = 'GEN-SIM-DIGI-RECO'
      }
    }
#
#  drop all the INPUT stuff, BUT simulation
#

#    replace FEVT.outputCommands += 'drop *_*_*_Rec'
#    replace FEVT.outputCommands += SimG4CoreFEVT.outputCommands
#    replace FEVT.outputCommands += SimTrackerFEVT.outputCommands
#    replace FEVT.outputCommands += SimMuonFEVT.outputCommands
#    replace FEVT.outputCommands += SimCalorimetryFEVT.outputCommands
#    replace FEVT.outputCommands += RecoGenJetsFEVT.outputCommands
#    module evtInfo = AsciiOutputModule {}

    # Track Validator
#    include "Validation/RecoTrack/data/MultiTrackValidator.cff"
    #replace multiTrackValidator.associators = {"TrackAssociatorByChi2"}
    #replace multiTrackValidator.label = {"ctfWithMaterialTracks"}
    #replace multiTrackValidator.label_tp = trackingtruth:TrackTruth
    #replace multiTrackValidator.out = "file.root"

    # Tracking Truth
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    #include "SimGeneral/TrackingAnalysis/data/trackingtruth.cfi"
    #replace trackingtruth.HepMCDataLabels = {"source"}
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"

    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"




    #
    # run digitization before reconstruction

#    path p1 = {pdigi, trackerlocalreco, ckftracks,rstracks,multiTrackValidator}
    path p1 = {mix, siStripMatchedRecHits, TrackRefitter, CPEtest}
#    endpath outpath = {FEVT}

}
