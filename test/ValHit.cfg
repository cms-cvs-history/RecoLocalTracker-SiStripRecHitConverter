process Clusterizer = {

	source = PoolSource { 
##   	 untracked vstring fileNames = {'file:muon_100_noise.root'}
   	 untracked vstring fileNames = {'file:muon_500.root'}
##   	 untracked vstring fileNames = {'file:muon_5000.root'}
##   	 untracked vstring fileNames = {'file:evtgen_detsim_digi_pileup.root'}
	 untracked int32 MaxEvents = 10
	}

        module out = PoolOutputModule {
               untracked string fileName = 'ClusterstoRecHit.root'
	}

        module ThreeThresholdClusterizer =  SiStripClusterizer {
                untracked int32 VerbosityLevel = 1
	string DigiProducer = "stripdigi"
		string ClusterMode = "ThreeThresholdClusterizer"
		double ChannelThreshold = 2.0
		double SeedThreshold = 3.0
		double ClusterThreshold = 2.0
	 	int32 MaxHolesInCluster   = 1  
                double ElectronPerAdc      = 313.0 
                double EquivalentNoiseCharge300um = 2160.
                double BadStripProbability = 0.002
                bool UseNoiseBadStripFlagFromDB = false
        }

 	es_source magfield = XMLIdealGeometryESSource {
                    FileInPath GeometryConfiguration ="Geometry/CMSCommonData/data/FieldConfiguration.xml"
                    #the proper root node is set in the xml file
                    string rootNodeName=""
        }
        es_module = VolumeBasedMagneticFieldESProducer {
                     double findVolumeTolerance = 0.0
                     untracked bool cacheLastVolume = true
                     untracked bool timerOn = false
        }

        es_source = XMLIdealGeometryESSource {
               FileInPath GeometryConfiguration = "Geometry/TrackerSimData/data/trackerSimConfiguration.xml"
               #the proper root node is set in the xml file
               string rootNodeName = ""
        }

        es_module = TrackerGeometricDetESModule {}
        es_module = TrackerDigiGeometryESModule {}

       es_module = StripCPEESProducer {
                string ComponentName = "StandardStripCPE"
                double TanLorentzAnglePerTesla = 0.106
        }

        module LocalMeasurementConverter =  SiStripRecHitConverter{
                untracked int32 VerbosityLevel = 1
                string ClusterProducer = "ThreeThresholdClusterizer"
               string StripCPE = "StandardStripCPE"
        }
 
        module Validate =  ValHit{
                untracked int32 VerbosityLevel = 1
                string RecHitProducer = "LocalMeasurementConverter"
###		string fileName = "prova_noise.root"
###		string fileName = "histo_muon_5000.root"
		string fileName = "histo_muon_500.root"
        }

        path p = {ThreeThresholdClusterizer, LocalMeasurementConverter, Validate }
}

